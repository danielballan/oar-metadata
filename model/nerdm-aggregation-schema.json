{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$extensionSchemas": [
        "https://www.nist.gov/od/dm/enhanced-json-schema/v0.1#"
    ],
    "id": "https://data.nist.gov/od/dm/science-initiative-schema/v0.1#",
    "rev": "wd1",
    "title": "The JSON Schema for specific science domains",
    "description": "A JSON Schema which helps add different science initiatives and related projects together",
    "definitions": {
        "Aggregation": {
            "description": "Agregation of different resources published with PDR and are part of a science initiative",
            "notes": [
                ""
            ],
            "allOf": [
                {
                    "$ref": "https://data.nist.gov/od/dm/nerdm-schema/v0.5#/definitions/Resource"
                },
                {
                    "type": "object",
                    "properties": {
                        "creators": {
                            "title": "Creators",
                            "description": "An individual or an organization responsible of this collection of resources",
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/Person"
                            },
                            "uniqueItems": true
                        },
                        "aggregation-components": {
                            "title": "Aggregation Components",
                            "description": "a listing of the various aggregation resources",
                            "notes": [
                                 ""
                            ],
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/AggregationComponent"
                            },
                            "minLength": 1,
                            "uniqueItems": true,
                            "mergeStrategy": "arrayMergeById",
                            "mergeOptions": {
                                "idRef": "/@id"
                            }
                        }
                    }
                }
            ]
        },
        "DynamicResourceSet": {
            "description": "this provides a search query to get all the resources part of this aggregation",
            "notes": [
                "Provide this component even if the accessURL is the same as the landing page; this indicates that the landing page provides a search tool in it."
            ],
            "allOf": [
                { "$ref": "https://data.nist.gov/od/dm/nerdm-schema/v0.1#/definitions/Component" },
                {
                    "properties": {
                        "searchURL": {
                            "description": "the URL for querying service to get list of resources",
                            "type": "string",
                            "format": "uri"
                        }
                    },
                    "required": [
                        "searchURL"
                    ]
                }
            ]
        },
        "AggregationComponent": {
            "description": "a description of a component of a resource",
            "type": "object",
            "notes": [
                "Include a $extensionSchema property to validate this description against a Component sub-type"
            ],
            "properties": {
                "@type": {
                    "description": "the types of components that this component can be classified as",
                    "notes": [
                        "the first value should be considered its primary type.  This is usually a subtype of Component."
                    ],
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "mergeStrategy": "uniqueArray",
                    "mergeOptions": {
                        "incompatible": [
                            [
                                "nrdp:Subcollection",
                                "nrd:Hidden",
                                "nrdp:AccessPage",
                                "nrdp:IncludedResource",
                                "nrdp:DynamicResourceSet",
                                "nrdp:SearchPage"
                            ]
                        ]
                    }
                },
                "conformsTo": {
                    "title": "Standard",
                    "description": "URI used to identify a standardized specification the component conforms to",
                    "anyOf": [
                        {
                            "type": "string",
                            "format": "uri"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "mergeStrategy": "preferBase"
                }
            }
        }
    }
}